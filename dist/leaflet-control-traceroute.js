/*! For license information please see leaflet-control-traceroute.js.LICENSE */
!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e){t.exports=L},function(t,e,n){(function(t){t.Marker.Traceroute=t.Marker.extend({initialize:function(e,n){this.fellow={},this.data={},t.Marker.prototype.initialize.call(this,e,n)},options:{autoPan:!0},bearingTo:function(t){let e=Math.PI/180,n=this._latlng.lat*e,i=t.lat*e,o=this._latlng.lng*e,r=t.lng*e,a=Math.sin(r-o)*Math.cos(i),s=Math.cos(n)*Math.sin(i)-Math.sin(n)*Math.cos(i)*Math.cos(r-o);return(180*Math.atan2(a,s)/Math.PI+360)%360},distanceTo:function(t){return map.distance(this._latlng,t)},export:function(){return{}}})}).call(this,n(0))},function(t,e,n){!function(t,e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)i[o]=r[a];return i}var a=function(){function t(t){this.options={wrap:!0,steps:3},this.ellipsoid={a:6378137,b:6356752.3142,f:1/298.257223563},this.options=o(o({},this.options),t)}return t.prototype.toRadians=function(t){return t*Math.PI/180},t.prototype.toDegrees=function(t){return 180*t/Math.PI},t.prototype.wrap360=function(t){return 0<=t&&t<360?t:(t%360+360)%360},t.prototype.wrap180=function(t){return-180<=t&&t<180?t:((t+180)%360+360)%360-180},t.prototype.direct=function(t,e,n,i){void 0===i&&(i=100);var o=this.toRadians(t.lat),r=this.toRadians(t.lng),a=this.toRadians(e),s=n,c=1e3*Number.EPSILON,l=this.ellipsoid,h=l.a,u=l.b,p=l.f,d=Math.sin(a),f=Math.cos(a),g=(1-p)*Math.tan(o),y=1/Math.sqrt(1+g*g),m=g*y,v=Math.atan2(g,f),_=y*d,b=1-_*_,M=b*(h*h-u*u)/(u*u),w=1+M/16384*(4096+M*(M*(320-175*M)-768)),L=M/1024*(256+M*(M*(74-47*M)-128)),k=s/(u*w),x=null,T=null,O=null,P=null,H=0;do{O=Math.cos(2*v+k),P=k,k=s/(u*w)+L*(x=Math.sin(k))*(O+L/4*((T=Math.cos(k))*(2*O*O-1)-L/6*O*(4*x*x-3)*(4*O*O-3)))}while(Math.abs(k-P)>c&&++H<i);if(H>=i)throw new EvalError("Direct vincenty formula failed to converge after "+i+" iterations (start="+t.lat+"/"+t.lng+"; bearing="+e+"; distance="+n+")");var R=m*x-y*T*f,S=Math.atan2(m*T+y*x*f,(1-p)*Math.sqrt(_*_+R*R)),E=p/16*b*(4+p*(4-3*b)),D=r+(Math.atan2(x*d,y*T-m*x*f)-(1-E)*p*_*(k+E*x*(O+E*T*(2*O*O-1)))),N=Math.atan2(_,-R);return{lat:this.toDegrees(S),lng:this.toDegrees(D),bearing:this.wrap360(this.toDegrees(N))}},t.prototype.inverse=function(t,n,i,o){void 0===i&&(i=100),void 0===o&&(o=!0);var r=t,a=n,s=this.toRadians(r.lat),c=this.toRadians(r.lng),l=this.toRadians(a.lat),h=this.toRadians(a.lng),u=Math.PI,p=Number.EPSILON,d=this.ellipsoid,f=d.a,g=d.b,y=d.f,m=h-c,v=(1-y)*Math.tan(s),_=1/Math.sqrt(1+v*v),b=v*_,M=(1-y)*Math.tan(l),w=1/Math.sqrt(1+M*M),L=M*w,k=Math.abs(m)>u/2||Math.abs(l-s)>u/2,x=m,T=null,O=null,P=k?u:0,H=0,R=k?-1:1,S=null,E=1,D=null,N=1,C=null,A=null,j=0;do{if(S=w*(T=Math.sin(x))*(w*T)+(_*L-b*w*(O=Math.cos(x)))*(_*L-b*w*O),Math.abs(S)<p)break;if(R=b*L+_*w*O,A=x,x=m+(1-(C=y/16*(N=1-(D=_*w*T/(H=Math.sqrt(S)))*D)*(4+y*(4-3*N))))*y*D*((P=Math.atan2(H,R))+C*H*((E=0!==N?R-2*b*L/N:0)+C*R*(2*E*E-1))),(k?Math.abs(x)-u:Math.abs(x))>u)throw new EvalError("λ > π")}while(Math.abs(x-A)>1e-12&&++j<i);if(j>=i){if(o)return this.inverse(t,new e.LatLng(n.lat,n.lng-.01),i,o);throw new EvalError("Inverse vincenty formula failed to converge after "+i+" iterations (start="+t.lat+"/"+t.lng+"; dest="+n.lat+"/"+n.lng+")")}var B=N*(f*f-g*g)/(g*g),W=B/1024*(256+B*(B*(74-47*B)-128)),F=g*(1+B/16384*(4096+B*(B*(320-175*B)-768)))*(P-W*H*(E+W/4*(R*(2*E*E-1)-W/6*E*(4*H*H-3)*(4*E*E-3)))),G=Math.abs(S)<p?0:Math.atan2(w*T,_*L-b*w*O),$=Math.abs(S)<p?u:Math.atan2(_*T,-b*w+_*L*O);return{distance:F,initialBearing:Math.abs(F)<p?NaN:this.wrap360(this.toDegrees(G)),finalBearing:Math.abs(F)<p?NaN:this.wrap360(this.toDegrees($))}},t.prototype.intersection=function(t,n,i,o){var r=this.toRadians(t.lat),a=this.toRadians(t.lng),s=this.toRadians(i.lat),c=this.toRadians(i.lng),l=this.toRadians(n),h=this.toRadians(o),u=s-r,p=c-a,d=Math.PI,f=Number.EPSILON,g=2*Math.asin(Math.sqrt(Math.sin(u/2)*Math.sin(u/2)+Math.cos(r)*Math.cos(s)*Math.sin(p/2)*Math.sin(p/2)));if(Math.abs(g)<f)return t;var y=(Math.sin(s)-Math.sin(r)*Math.cos(g))/(Math.sin(g)*Math.cos(r)),m=(Math.sin(r)-Math.sin(s)*Math.cos(g))/(Math.sin(g)*Math.cos(s)),v=Math.acos(Math.min(Math.max(y,-1),1)),_=Math.acos(Math.min(Math.max(m,-1),1)),b=l-(Math.sin(c-a)>0?v:2*d-v),M=(Math.sin(c-a)>0?2*d-_:_)-h;if(0===Math.sin(b)&&0===Math.sin(M))return null;if(Math.sin(b)*Math.sin(M)<0)return null;var w=-Math.cos(b)*Math.cos(M)+Math.sin(b)*Math.sin(M)*Math.cos(g),L=Math.atan2(Math.sin(g)*Math.sin(b)*Math.sin(M),Math.cos(M)+Math.cos(b)*w),k=Math.asin(Math.sin(r)*Math.cos(L)+Math.cos(r)*Math.sin(L)*Math.cos(l));if(isNaN(k))return null;var x=a+Math.atan2(Math.sin(l)*Math.sin(L)*Math.cos(r),Math.cos(L)-Math.sin(r)*Math.sin(k));return new e.LatLng(this.toDegrees(k),this.toDegrees(x))},t.prototype.midpoint=function(t,n){var i=this.toRadians(t.lat),o=this.toRadians(t.lng),r=this.toRadians(n.lat),a=this.toRadians(n.lng-t.lng),s=Math.cos(i),c=Math.sin(i),l={x:s+Math.cos(r)*Math.cos(a),y:0+Math.cos(r)*Math.sin(a),z:c+Math.sin(r)},h=Math.atan2(l.z,Math.sqrt(l.x*l.x+l.y*l.y)),u=o+Math.atan2(l.y,l.x);return new e.LatLng(this.toDegrees(h),this.toDegrees(u))},t}(),s=function(){function t(t){this.geodesic=new a,this.options={wrap:!0,steps:3},this.options=o(o({},this.options),t),this.steps=void 0===this.options.steps?3:this.options.steps}return t.prototype.recursiveMidpoint=function(t,e,n){var i=[t,e],o=this.geodesic.midpoint(t,e);return this.options.wrap&&(o.lng=this.geodesic.wrap180(o.lng)),n>0?(i.splice.apply(i,r([0,1],this.recursiveMidpoint(t,o,n-1))),i.splice.apply(i,r([i.length-2,2],this.recursiveMidpoint(o,e,n-1)))):i.splice(1,0,o),i},t.prototype.line=function(t,e){return this.recursiveMidpoint(t,e,Math.min(8,this.steps))},t.prototype.circle=function(t,n){for(var i=[],o=0;o<this.steps+1;o++){var r=this.geodesic.direct(t,360/this.steps*o,n);i.push(new e.LatLng(r.lat,r.lng))}return i},t.prototype.multiLineString=function(t){var e=this,n=[];return t.forEach((function(t){for(var i=[],o=1;o<t.length;o++)i.splice.apply(i,r([i.length-1,1],e.line(t[o-1],t[o])));n.push(i)})),n},t.prototype.lineString=function(t){return this.multiLineString([t])[0]},t.prototype.splitLine=function(t,n){var i={point:new e.LatLng(89,-180),bearing:180},o={point:new e.LatLng(89,180),bearing:180};t.lng=Math.max(-179.9,t.lng),t.lng=Math.min(179.9,t.lng),n.lng=Math.max(-179.9,n.lng),n.lng=Math.min(179.9,n.lng);var r,a=this.geodesic.inverse(t,n);return(r=a.initialBearing>180?this.geodesic.intersection(t,a.initialBearing,i.point,i.bearing):this.geodesic.intersection(t,a.initialBearing,o.point,o.bearing))&&this.geodesic.inverse(t,r).distance<a.distance?r.lng<-179.9999?[[t,r],[new e.LatLng(r.lat,r.lng+360),n]]:r.lng>179.9999?[[t,r],[new e.LatLng(r.lat,r.lng-360),n]]:[[t,r],[r,n]]:[[t,n]]},t.prototype.splitMultiLineString=function(t){var e=this,n=[];return t.forEach((function(t){for(var i=[t[0]],o=1;o<t.length;o++){var r=e.splitLine(t[o-1],t[o]);1===r.length?i.push(t[o]):(i.push(r[0][1]),n.push(i),i=r[1])}n.push(i)})),n},t.prototype.distance=function(t,e){return this.geodesic.inverse(t,e).distance},t.prototype.multilineDistance=function(t){var e=this,n=[];return t.forEach((function(t){for(var i=0,o=1;o<t.length;o++)i+=e.distance(t[o-1],t[o]);n.push(i)})),n},t.prototype.updateStatistics=function(t,e){var n={};return n.distanceArray=this.multilineDistance(t),n.totalDistance=n.distanceArray.reduce((function(t,e){return t+e}),0),n.points=0,t.forEach((function(t){n.points+=t.reduce((function(t){return t+1}),0)})),n.vertices=0,e.forEach((function(t){n.vertices+=t.reduce((function(t){return t+1}),0)})),n},t}();function c(t){return"object"==typeof t&&null!==t&&"lat"in t&&"lng"in t&&"number"==typeof t.lat&&"number"==typeof t.lng}function l(t){return t instanceof Array&&"number"==typeof t[0]&&"number"==typeof t[1]}function h(t){return t instanceof e.LatLng||!!l(t)||!!c(t)}function u(t){if(t instanceof e.LatLng)return t;if(l(t))return new e.LatLng(t[0],t[1]);if(c(t))return new e.LatLng(t.lat,t.lng);throw new Error("L.LatLngExpression expected. Unknown object found.")}var p=function(t){function n(n,i){var r=t.call(this,[],i)||this;return r.defaultOptions={wrap:!0,steps:3},r.statistics={},r.points=[],e.Util.setOptions(r,o(o({},r.defaultOptions),i)),r.geom=new s(r.options),void 0!==n&&r.setLatLngs(n),r}return i(n,t),n.prototype.updateGeometry=function(){var e=[];if(this.points.length>0&&this.points[0].length>=2)if(e=this.geom.multiLineString(this.points),this.options.wrap){var n=this.geom.splitMultiLineString(e);t.prototype.setLatLngs.call(this,n)}else t.prototype.setLatLngs.call(this,e);else t.prototype.setLatLngs.call(this,e);this.statistics=this.geom.updateStatistics(this.points,e)},n.prototype.setLatLngs=function(t){return this.points=function(t){for(var e=[],n=function(n){if(h(n)){var i=[];return t.forEach((function(t){i.push(u(t))})),e.push(i),"break"}if(!(n instanceof Array))throw new Error("L.LatLngExpression[] | L.LatLngExpression[][] expected. Unknown object found.");if(!h(n[0]))throw new Error("L.LatLngExpression[] | L.LatLngExpression[][] expected. Unknown object found.");var o=[];n.forEach((function(t){o.push(u(t))})),e.push(o)},i=0,o=t;i<o.length&&"break"!==n(o[i]);i++);return e}(t),this.updateGeometry(),this},n.prototype.addLatLng=function(t,e){var n=u(t);return 0===this.points.length?this.points.push([n]):void 0===e?this.points[this.points.length-1].push(n):e.push(n),this.updateGeometry(),this},n.prototype.fromGeoJson=function(t){var n=[],i=[];return"FeatureCollection"===t.type?i=t.features:"Feature"===t.type?i=[t]:["MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"].includes(t.type)?i=[{type:"Feature",geometry:t,properties:{}}]:console.log('[Leaflet.Geodesic] fromGeoJson() - Type "'+t.type+'" not supported.'),i.forEach((function(t){switch(t.geometry.type){case"MultiPoint":case"LineString":n=r(n,[e.GeoJSON.coordsToLatLngs(t.geometry.coordinates,0)]);break;case"MultiLineString":case"Polygon":n=r(n,e.GeoJSON.coordsToLatLngs(t.geometry.coordinates,1));break;case"MultiPolygon":t.geometry.coordinates.forEach((function(t){n=r(n,e.GeoJSON.coordsToLatLngs(t,1))}));break;default:console.log('[Leaflet.Geodesic] fromGeoJson() - Type "'+t.geometry.type+'" not supported.')}})),n.length&&this.setLatLngs(n),this},n.prototype.distance=function(t,e){return this.geom.distance(u(t),u(e))},n}(e.Polyline),d=function(t){function n(n,i){var r=t.call(this,[],i)||this;r.defaultOptions={wrap:!0,steps:24,fill:!0,noClip:!0},r.statistics={},e.Util.setOptions(r,o(o({},r.defaultOptions),i));var a=r.options;return r.radius=void 0===a.radius?1e6:a.radius,r.center=void 0===n?new e.LatLng(0,0):u(n),r.geom=new s(r.options),r.update(),r}return i(n,t),n.prototype.update=function(){var t=this.geom.circle(this.center,this.radius);this.statistics=this.geom.updateStatistics([[this.center]],[t]),this.statistics.totalDistance=this.geom.multilineDistance([t]).reduce((function(t,e){return t+e}),0),this.setLatLngs(t)},n.prototype.distanceTo=function(t){var e=u(t);return this.geom.distance(this.center,e)},n.prototype.setLatLng=function(t){this.center=u(t),this.update()},n.prototype.setRadius=function(t){this.radius=t,this.update()},n}(e.Polyline);e.Geodesic=p,e.geodesic=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(p.bind.apply(p,r([void 0],t)))},e.GeodesicCircle=d,e.geodesiccircle=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(d.bind.apply(d,r([void 0],t)))},t.GeodesicCircleClass=d,t.GeodesicLine=p,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(0))},function(t,e,n){(function(t){var e,n,i;e=t.Marker.prototype._initIcon,n=t.Marker.prototype._setPos,i="msTransform"===t.DomUtil.TRANSFORM,t.Marker.addInitHook((function(){var t=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;t&&(t=t[0]+"px "+t[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||t||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",(function(t){t.target._applyRotation()}))})),t.Marker.include({_initIcon:function(){e.call(this)},_setPos:function(t){n.call(this,t),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[t.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,i?this._icon.style[t.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[t.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(t){return this.options.rotationAngle=t,this.update(),this},setRotationOrigin:function(t){return this.options.rotationOrigin=t,this.update(),this}})}).call(this,n(0))},function(t,e,n){"use strict";n.r(e),function(t){n(5),n(8),n(9),n(12),n(15),n(17),n(2),n(18);t.Control.Traceroute=t.Control.extend({options:{tools:{route:{icon:"☡",title:"Start a route",handler:t.Handler.RouteBase,waypoint:{icon:t.divIcon({className:"leaflet-control-traceroute-icon",html:"<span class='leaflet-control-traceroute-point'></span>",iconAnchor:[20,18],iconSize:[40,40]}),popup:e=>`<pre>${JSON.stringify(t.Control.Traceroute.extract(e.export()),null,2)}</pre>`,tooltip:e=>`<pre>${JSON.stringify(t.Control.Traceroute.extract(e.export()),null,2)}</pre>`},midpoint:{icon:t.divIcon({className:"leaflet-control-traceroute-icon",html:"<div class='leaflet-control-traceroute-arrow'></div>",iconAnchor:[20,18],iconSize:[40,40]}),tooltip:"Click to insert a waypoints here",opacity:.5},trace:{weight:5,opacity:.5,color:"black"},pointer:{dashArray:"8"}},bearing:{icon:"∡",title:"Radio Navigation",handler:t.Handler.BearingBase,marker:{icon:t.divIcon({className:"leaflet-control-traceroute-icon",html:"<span class='leaflet-control-traceroute-losange'></span>",iconAnchor:[20,18],iconSize:[40,40]}),tooltip:e=>`<pre>${JSON.stringify(t.Control.Traceroute.extract(e.export()),null,2)}</pre>`},trace:{dashArray:"5,5,1,5",opacity:.3,color:"grey"},pointer:{dashArray:"8"}},track:{icon:"✈",title:"Track Position",handler:t.Handler.TrackBase,marker:{icon:t.divIcon({className:"leaflet-control-traceroute-icon",html:"<div class='leaflet-control-traceroute-airplane'></div>",iconAnchor:[20,18],iconSize:[40,40]}),tooltip:e=>`<pre>${JSON.stringify(t.Control.Traceroute.extract(e.export()),null,2)}</pre>`},circle:{},trace:{weight:5,opacity:.5,color:"black"},locate:{enableHighAccuracy:!0,timeout:5e3,maximumAge:0,setView:!0}},clear:{icon:"✗",title:"Clear routes",handler:t.Handler.ClearBase}}},initialize:function(e){t.Control.Traceroute.mergeDeep(this.options,e),this.handler=new t.Handler.Traceroute(this);for(let t of Object.values(this.options.tools))t.handler=new t.handler(this,t)},onAdd:function(e){this._map=e,this._routes.addTo(this._map);let n=document.createElement("div");n.classList.add("leaflet-bar"),t.DomEvent.disableClickPropagation(n);for(const t of Object.values(this.options.tools))n.appendChild(this._createControl(t.icon,t.title,this._toggleMode(t.handler)));return n},onRemove:function(t){this._routes.removeTo(this._map),this.handlers.routeBase.disable(),this.handlers.bearingStart.disable()},export:function(){let t={routes:[]};return this._routes.eachLayer((function(e){t.routes.push(e.export())}),this),t},_createControl:function(e,n,i){let o=document.createElement("a");return o.innerHTML=e,o.classList.add("leaflet-control-traceroute"),o.setAttribute("title",n),o.setAttribute("href","#"),o.setAttribute("role","button"),t.DomEvent.on(o,"click",i,this),o},_routes:t.layerGroup(),_toggleMode:function(t){return function(e){return e&&e.target&&(t.target=e.target),t.enabled()?t.disable():t.enable(),t.enabled()}},statics:{format:function(t,e){if("number"!=typeof t)return`- ${e}`;switch(void 0===e&&t>=1e3&&(e="km"),e){case"km":return`${(t/1e3).toFixed(1)}${e}`;case"mi":return`${(t/1609.344).toFixed(1)}${e}`;case"NM":return`${(t/1852).toFixed(1)}${e}`;case"km/h":return`${(t/1e3*3600).toFixed(0)}${e}`;case"ft/min":return`${(t/.3048*60).toFixed(0)}${e}`;case"kt":return`${(t/1852*3600).toFixed(0)}${e}`;case"ft":return`${(t/.3048).toFixed(0)}${e}`;case"°":return`${t.toFixed(1)}${e}`;case"time":return new Date(t).toUTCString().slice(-12);default:e="m";case"m":return`${t.toFixed(0)}${e}`}},extract:function(t){const e={latitude:"°",longitude:"°",out:"°",in:"°",distance:"NM",totalDistance:"NM",qdr:"°",qdm:"°",distance:"NM",altitude:"ft",vario:"ft/min",accuracy:"m",altitudeAccuracy:"m",heading:"°",bearing:"°",speed:"kt",estimatedSpeed:"kt",time:"time"};let n={};for(let[i,o]of Object.entries(t))void 0!==e[i]&&(n[i]=this.format(o,e[i]));return n},dump:function(t){return`<pre>${JSON.stringify(this.extract(p.export()),null,2)}</pre>`},mergeDeep:function t(e,...n){const i=t=>t&&"object"==typeof t&&!Array.isArray(t);if(!n.length)return e;const o=n.shift();if(i(e)&&i(o))for(const n in o)i(o[n])?(e[n]||Object.assign(e,{[n]:{}}),t(e[n],o[n])):Object.assign(e,{[n]:o[n]});t(e,...n)}}}),t.control.traceroute=function(e){return new t.Control.Traceroute(e)}}.call(this,n(0))},function(t,e,n){"use strict";(function(t){n(6),n(7),n(2);t.LayerGroup.Route=t.LayerGroup.extend({options:{bubblingMouseEvents:!1,trace:{bubblingMouseEvents:!1},waypoint:{bubblingMouseEvents:!1,draggable:!0},midpoint:{bubblingMouseEvents:!1}},initialize:function(e,n){t.Control.Traceroute.mergeDeep(this.options,n),this._layers={},this.editHandler=new t.Handler.RouteEdit(this),this.trace=new t.Geodesic([],this.options.trace).addTo(this),this.midpoints=(new t.FeatureGroup).addTo(this),this.waypoints=(new t.FeatureGroup).on("layerremove",this.clean,this).on("layerremove",this._handleSiblings,this).on("layeradd layerremove",this._handleParent,this).on("layeradd layerremove move",this._draw,this).on("layeradd layerremove move update",this._fireWithLayer,this).on("layeradd",(function(t){t.layer.on("move",this._draw,this).on("move",this._fireWithLayer,this)}),this).addTo(this),this.data={}},export:function(){return this.data.id=this._leaflet_id,this.data.waypoints=[],this.waypoints.getLayers()[0].tolast(t=>this.data.waypoints.push(t.export())),this.data},clean:function(){return!(this.waypoints.getLayers().length<2)||(this.waypoints.clearLayers(),!1)},createWaypoint:function(e){let n;return n=e.layer?[e.layer.previous,e.layer.next]:this.waypoints.getLayers().length>0?[this.waypoints.getLayers()[0].tolast(),void 0]:[null,null],new t.Marker.Waypoint(e.latlng,this.options.waypoint).setSiblings(...n).addTo(this.waypoints)},_draw:function(e){let n;n=e.layer instanceof t.Marker.Waypoint&&e.layer.parent instanceof t.LayerGroup.Route?e.layer:e.layer instanceof t.Marker.Waypoint?e.layer.previous||e.layer.next:e.target instanceof t.Marker.Waypoint?e.target:this.waypoints.getLayers()[0],this.trace.setLatLngs([]),this.midpoints.clearLayers(),n instanceof t.Marker.Waypoint&&n.tofirst().tolast(e=>{e._decorate(),this.trace.addLatLng(e.getLatLng()),e.previous instanceof t.Marker.Waypoint&&this.midpoints.addLayer(this._drawMidpoint(e.previous,e))}),this._mapToAdd.fire("traceroute:route:update",this)},_drawMidpoint:function(e,n){if(e instanceof t.Marker.Waypoint&&n instanceof t.Marker.Waypoint){let{initialBearing:i,finalBearing:o}=this.trace.geom.geodesic.inverse(e.getLatLng(),n.getLatLng()),r=new t.Marker(this.trace.geom.geodesic.midpoint(e.getLatLng(),n.getLatLng()),t.extend({rotationAngle:Math.round((i+o)/2)%360},this.options.midpoint));return r.previous=e,r.next=n,r}return null},_fireWithLayer:function(t){this._mapToAdd.fire(`traceroute:waypoint:${t.type.replace("layer","")}`,t.layer||t.target)},_handleParent:function(t){switch(t.type){case"layeradd":t.layer.parent=this;break;case"layerremove":delete t.layer.parent}},_handleSiblings:function(e){e.layer.next instanceof t.Marker.Waypoint&&e.layer.next.setSiblings(e.layer.previous,!1),e.layer.previous instanceof t.Marker.Waypoint&&e.layer.previous.setSiblings(!1,e.layer.next)}})}).call(this,n(0))},function(t,e,n){"use strict";(function(t){n(1),n(3),n(2);t.Marker.Waypoint=t.Marker.Traceroute.extend({geodesic:t.geodesic().geom.geodesic,export:function(){return this.data.id=this._leaflet_id,void 0!==this.fellow.bearings&&(this.data.bearings=this.fellow.bearings.map(t=>t.export())),this.previous instanceof t.Marker.Waypoint&&(this.data.previous_id=this.previous._leaflet_id),this.next instanceof t.Marker.Waypoint&&(this.data.next_id=this.next._leaflet_id),this.data},registerBearing:function(t){return void 0===this.fellow.bearings&&(this.fellow.bearings=[]),this.fellow.bearings.push(t),this},setSiblings:function(e,n){return e instanceof t.Marker.Waypoint?(this.previous=e,e.next=this):null==e&&(this.previous=null),n instanceof t.Marker.Waypoint?(this.next=n,n.previous=this):null==n&&(this.next=null),this.fire("update",this,!0),this},_decorate:function(){if(this.data.position=this._latlng,this.previous instanceof t.Marker.Waypoint){let t=this.geodesic.inverse(this.previous.getLatLng(),this.getLatLng());this.data.in=Number(t.finalBearing.toPrecision(5)),this.data.distance=Number(t.distance.toPrecision(5)),this.data.totalDistance=(this.previous.data.totalDistance||0)+this.data.distance}if(this.next instanceof t.Marker.Waypoint){let t=this.geodesic.inverse(this.getLatLng(),this.next.getLatLng());this.data.out=Number(t.initialBearing.toPrecision(5))}return this.togglePopup().togglePopup().toggleTooltip().toggleTooltip(),this},tofirst:function(t){return this._follow(t,t=>t.previous)},tolast:function(t){return this._follow(t,t=>t.next)},_follow:function(e,n){let i,o=this;for(;o instanceof t.Marker.Waypoint;)i=o,"function"==typeof e&&e.call(this,i),o=n(i);return i}})}).call(this,n(0))},function(t,e,n){(function(t){t.Handler.RouteEdit=t.Handler.extend({initialize:function(t){this._route=t},addHooks:function(){this._route.midpoints.bindTooltip(this._route.options.midpoint.tooltip,{direction:"auto"}).on("click",this._route.createWaypoint,this._route),this._route.waypoints.bindTooltip(this._route.options.waypoint.tooltip,{direction:"auto"}).unbindPopup().on("contextmenu",this._removeLayer,this._route.waypoints).eachLayer(t=>t.dragging.enable())},removeHooks:function(){this._route.midpoints.unbindTooltip().off("click",this._route.createWaypoint,this._route),this._route.waypoints.unbindTooltip().bindPopup(this._route.options.waypoint.popup).off("contextmenu",this._removeLayer,this._route.waypoints).eachLayer(t=>t.dragging.disable())},_removeLayer:function(t){this.removeLayer(t.layer)}})}).call(this,n(0))},function(t,e,n){(function(t){t.Handler.Traceroute=t.Handler.extend({initialize:function(t){this._control=t,this._oldSettings={}},addHooks:function(){this._oldSettings.cursor=map._container.style.cursor,map._container.style.cursor="crosshair",this._oldSettings.doubleClickZoom=map.doubleClickZoom.enabled(),map.doubleClickZoom.disable()},removeHooks:function(){map._container.style.cursor=this._oldSettings.cursor,this._oldSettings.doubleClickZoom&&map.doubleClickZoom.enable()}})}).call(this,n(0))},function(t,e,n){"use strict";(function(t){n(10);t.Handler.RouteBase=t.Handler.extend({initialize:function(e,n){t.Util.setOptions(this,n),this._control=e,this.startHandler=new t.Handler.RouteStart(e._routes,n)},addHooks:function(){this._control.options.tools.bearing.handler.disable(),this._control.handler.enable(),this.target.style.filter="invert(1)",t.DomEvent.on(document,"keydown",this._onKeyDown,this),map.fire("traceroute:route:start",this._control),this.startHandler.enable()},removeHooks:function(){t.DomEvent.off(document,"keydown",this._onKeyDown,this),map.fire("traceroute:route:stop",this._control),this.target.style.filter="invert(0)",this._control.handler.disable(),this.startHandler.traceHandler.disable(),this.startHandler.disable()},_onKeyDown:function(t){switch(t.keyCode){case 27:this.disable()}}})}).call(this,n(0))},function(t,e,n){"use strict";(function(t){n(11);t.Handler.RouteStart=t.Handler.extend({initialize:function(e,n){t.Util.setOptions(this,n),this._routes=e,this.traceHandler=new t.Handler.RouteTrace(this,e,n)},addHooks:function(){map.on("click",this._startRoute,this),this._routes.eachLayer((function(t){t.editHandler.enable(),t.waypoints.on("click",this._resumeRoute,this)}),this)},removeHooks:function(){map.off("click",this._startRoute,this),this._routes.eachLayer((function(t){t.editHandler.disable(),t.waypoints.off("click",this._resumeRoute,this)}),this)},_startRoute:function(t){this.traceHandler.enable(),this.traceHandler._createPoint(t)},_resumeRoute:function(t){this.traceHandler._route=t.layer.parent,this.traceHandler._route.editHandler.disable(),this.traceHandler.enable(),map.fire("traceroute:route:resume",this.traceHandler._route)}})}).call(this,n(0))},function(t,e,n){(function(t){t.Handler.RouteTrace=t.Handler.extend({initialize:function(e,n,i){t.Util.setOptions(this,i),this._parent=e,this._routes=n,this._pointerTrace=new t.Geodesic([],i.pointer)},addHooks:function(){this._parent.disable(),this._clearPointerTrace(),this._pointerTrace.addTo(map),map.on("mousemove",this._drawPointer,this).on("click",this._createPoint,this),t.DomEvent.on(document,"keydown",this._onKeyDown,this),this._route||this._createRoute(),this._route.waypoints.on("click",this._finishRouteIfLast,this)},removeHooks:function(){this._clearPointerTrace(),this._pointerTrace.removeFrom(map),map.off("mousemove",this._drawPointer,this).off("click",this._createPoint,this),t.DomEvent.off(document,"keydown",this._onKeyDown,this),this._route.waypoints.off("click",this._finishRouteIfLast,this),this._route=null,this._parent.enable()},_createRoute:function(){return map.fire("traceroute:route:new",this._route),this._route=new t.LayerGroup.Route([],this.options).addTo(this._routes)},_createPoint:function(t){return this._route||this._createRoute(),this._route.createWaypoint(t)},_finishRouteIfLast:function(t){t.layer===t.layer.tolast()&&this._finishRoute()},_finishRoute:function(){return this._route.clean()?(map.fire("traceroute:route:finish",this._route),this._route.editHandler.enable()):(map.fire("traceroute:route:abort",this._route),this._route.remove()),this.disable(),this._route},_drawPointer:function(t){this._route&&this._route.waypoints.getLayers().length>0&&this._pointerTrace.setLatLngs([this._route.waypoints.getLayers()[0].tolast().getLatLng(),t.latlng])},_clearPointerTrace:function(){this._pointerTrace.setLatLngs([])},_onKeyDown:function(t){switch(t.keyCode){case 27:this._finishRoute()}}})}).call(this,n(0))},function(t,e,n){"use strict";(function(t){n(13);t.Handler.BearingBase=t.Handler.extend({initialize:function(e,n){t.Util.setOptions(this,n),this._control=e,this.bearings=(new t.FeatureGroup).addTo(map),this.traces=new t.Polyline([],this.options.trace).addTo(map),this.traceHandler=new t.Handler.BearingTrace(this.bearings,this.options)},addHooks:function(){this._control.options.tools.route.handler.disable(),this._control.handler.enable(),this.target.style.filter="invert(1)",this._control._routes.eachLayer((function(t){t.waypoints.on("click",this._selectOrigin,this)}),this),this.bearings.bindTooltip(this.options.marker.tooltip,{direction:"auto"}).unbindPopup().eachLayer(t=>t.dragging.enable()),t.DomEvent.on(document,"keydown",this._onKeyDown,this),map.fire("traceroute:bearing:start",this._control)},removeHooks:function(){t.DomEvent.off(document,"keydown",this._onKeyDown,this),this.bearings.bindPopup(this.options.marker.tooltip,{direction:"auto"}).unbindTooltip().eachLayer(t=>t.dragging.disable()),this._control._routes.eachLayer((function(t){t.waypoints.off("click",this._selectOrigin,this)}),this),this._control.handler.disable(),this.target.style.filter="invert(0)",this.traceHandler.disable(),map.fire("traceroute:bearing:stop",this._control)},_selectOrigin:function(t){this.traceHandler.origin=t.layer,this.traceHandler.enable()},_onKeyDown:function(t){switch(t.keyCode){case 27:this.disable()}}})}).call(this,n(0))},function(t,e,n){"use strict";(function(t){n(14);t.Handler.BearingTrace=t.Handler.extend({initialize:function(e,n){t.Util.setOptions(this,n),this.bearings=e,this._pointer=new t.Polyline([],n.pointer)},addHooks:function(){this._clearPointer(),this._pointer.addTo(map),map.on("mousemove",this._drawPointer,this).on("click",this._setBearing,this),t.DomEvent.on(document,"keydown",this._onKeyDown,this),this.origin||this.disable()},removeHooks:function(){this._clearPointer(),this._pointer.removeFrom(map),map.off("mousemove",this._drawPointer,this).off("click",this._setBearing,this),t.DomEvent.off(document,"keydown",this._onKeyDown,this),this.origin=null},_setBearing:function(e){new t.Marker.Bearing(e.latlng,t.extend({draggable:!0},this.options.marker,{trace:this.options.trace})).setOrigin(this.origin).addTo(this.bearings),this.disable()},_drawPointer:function(t){this._pointer.setLatLngs([this.origin.getLatLng(),t.latlng])},_clearPointer:function(){this._pointer.setLatLngs([])},_onKeyDown:function(t){switch(t.keyCode){case 27:this.disable()}}})}).call(this,n(0))},function(t,e,n){"use strict";(function(t){n(1);t.Marker.Bearing=t.Marker.Traceroute.extend({initialize:function(e,n){this.trace=new t.Polyline([],n.trace),delete n.trace,this.on("move",this._decorate,this).on("move",this._draw,this),Object.getPrototypeOf(Object.getPrototypeOf(this)).initialize.call(this,e,n)},onAdd:function(t){this.trace.addTo(t),Object.getPrototypeOf(Object.getPrototypeOf(this)).onAdd.call(this,t)},onRemove:function(t){this.trace.remove(),Object.getPrototypeOf(Object.getPrototypeOf(this)).onRemove.call(this,t)},bearing:{},export:function(){return this.data.id=this._leaflet_id,this.fellow.origin instanceof t.Marker.Waypoint&&(this.data.origin_id=this.fellow.origin._leaflet_id),this.data},setOrigin:function(t){return this.fellow.origin=t,t.on("remove",this.remove,this).on("move remove",this._decorate,this).on("move remove",this._draw,this).registerBearing(this),this._decorate()._draw(),this},_decorate:function(){return this.data.position=this._latlng,this.fellow.origin instanceof t.Marker.Waypoint&&(this.data.qdr=Number(this.bearingTo(this.fellow.origin.getLatLng()).toPrecision(5)),this.data.qdm=Number(this.fellow.origin.bearingTo(this._latlng).toPrecision(5)),this.data.distance=Number(this.distanceTo(this.fellow.origin.getLatLng()).toPrecision(5))),this.toggleTooltip().toggleTooltip(),this},_draw:function(){return this.trace.setLatLngs([this._latlng,this.fellow.origin.getLatLng()]),this}})}).call(this,n(0))},function(t,e,n){"use strict";(function(t){n(16);t.Handler.TrackBase=t.Handler.extend({initialize:function(e,n){t.Util.setOptions(this,n),this._control=e,this.marker=new t.Marker.Trackpoint([],t.extend({},this.options.marker)).bindTooltip(this.options.marker.tooltip,{direction:"auto"}),this.trace=new t.Polyline([],this.options.trace),this.circle=new t.Circle([],this.options.circle)},addHooks:function(){this.target.style.filter="invert(1)",map.on("locationfound",this._locationFound,this).on("locationerror",this._locationError,this).locate(t.extend({watch:!0},this.options.locate)).fire("traceroute:track:start",this),this.trace.addTo(map)},removeHooks:function(){this.target.style.filter="invert(0)",map.stopLocate().fire("traceroute:track:stop",this).off("locationfound",this._locationFound,this).off("locationerror",this._locationError,this)},_locationFound:function(e){let n={};map.hasLayer(this.marker)&&(n={bearing:this.marker.bearing(e.latlng),estimatedSpeed:this.marker.distance(e.latlng)/Math.floor((e.timestamp-this.marker.position.timestamp)/1e3),vario:(this.marker.position.altitude-e.altitude)/Math.floor((e.timestamp-this.marker.position.timestamp)/1e3)}),this.marker.setLatLng(e.latlng).addTo(map).setOpacity(1).decorate(t.extend(n,e)),this.circle.setLatLng(e.latlng).addTo(map).setRadius(e.accuracy),this.trace.addTo(map).addLatLng(e.latlng),map.fire("traceroute:track:found",e)},_locationError:function(t){this.marker.setOpacity(.5).addTo(map)}})}).call(this,n(0))},function(t,e,n){"use strict";(function(t){n(1),n(3);t.Marker.Trackpoint=t.Marker.Traceroute.extend({decorate:function(t){this._extractLocation(t).setRotationAngle(t.heading||0).toggleTooltip().toggleTooltip()},_extractLocation:function(t){latitude,longitude,altitude,vario,accuracy,altitudeAccuracy,heading,bearing,estimatedSpeed,speed,timestamp;return this.data=(({...t})=>({...t}))(t),this}})}).call(this,n(0))},function(t,e,n){(function(t){t.Handler.ClearBase=t.Handler.extend({initialize:function(e,n){t.Util.setOptions(this,n),this._control=e},addHooks:function(){this.target.style.filter="invert(1)",this._control._routes.clearLayers(),this._control.options.tools.track.handler.trace.setLatLngs([]),map.fire("traceroute:clear"),this.disable()},removeHooks:function(){return this.target.style.filter="invert(0)",!1}})}).call(this,n(0))},function(t,e,n){var i=n(19);"string"==typeof i&&(i=[[t.i,i,""]]);var o={insert:"head",singleton:!1};n(21)(i,o);i.locals&&(t.exports=i.locals)},function(t,e,n){(t.exports=n(20)(!1)).push([t.i,'.leaflet-control-traceroute {\n  font-family: "Lucida Console", Monaco, monospace;\n  font-weight: bold;\n  font-size: 22px;\n  filter: saturate(0%);\n}\n\n.leaflet-control-traceroute-icon {\n  display: inline-block;\n  font-style: normal;\n  font-weight: normal;\n  line-height: 1;\n  text-align: center;\n  vertical-align: middle;\n\n  font-size: xx-large;\n  text-shadow: 4px 4px 3px grey;\n}\n\n/* Waypoint icon */\n.leaflet-control-traceroute-point:before {\n  content: "⊙";\n  /* content: "◯"; */\n}\n\n/* Bearing Target icon */\n.leaflet-control-traceroute-losange:before {\n  content: "◇";\n}\n\n/* Midpoint icon */\n.leaflet-control-traceroute-arrow {\n  transform: rotateZ(-90deg);\n}\n.leaflet-control-traceroute-arrow:before {\n  content: "➤";\n  /* content: "➢"; */\n}\n\n/* Tracker icon */\n.leaflet-control-traceroute-airplane {\n  transform: rotateZ(-90deg);\n}\n.leaflet-control-traceroute-airplane:before {\n  content: "✈";\n}\n\n/* Alternative tracker icon */\n.leaflet-control-traceroute-helicopter:before {\n  content: "✇";\n  /*content: "⊛"; */\n}\n\n@keyframes revolution {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n.leaflet-control-traceroute-helicopter {\n  animation-name: revolution;\n  animation-duration: 1s;\n  animation-iteration-count: infinite;\n  animation-timing-function: linear;\n}\n.leaflet-control-traceroute-helicopter:hover{\n  animation-play-state: paused;\n}\n',""])},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var o=(a=i,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),r=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot).concat(t," */")}));return[n].concat(r).concat([o]).join("\n")}var a,s,c;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2],"{").concat(n,"}"):n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];null!=r&&(i[r]=!0)}for(var a=0;a<t.length;a++){var s=t[a];null!=s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="(".concat(s[2],") and (").concat(n,")")),e.push(s))}},e}},function(t,e,n){"use strict";var i,o={},r=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},a=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}();function s(t,e){for(var n=[],i={},o=0;o<t.length;o++){var r=t[o],a=e.base?r[0]+e.base:r[0],s={css:r[1],media:r[2],sourceMap:r[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function c(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=o[i.id],a=0;if(r){for(r.refs++;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(y(i.parts[a],e))}else{for(var s=[];a<i.parts.length;a++)s.push(y(i.parts[a],e));o[i.id]={id:i.id,refs:1,parts:s}}}}function l(t){var e=document.createElement("style");if(void 0===t.attributes.nonce){var i=n.nc;i&&(t.attributes.nonce=i)}if(Object.keys(t.attributes).forEach((function(n){e.setAttribute(n,t.attributes[n])})),"function"==typeof t.insert)t.insert(e);else{var o=a(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var h,u=(h=[],function(t,e){return h[t]=e,h.filter(Boolean).join("\n")});function p(t,e,n,i){var o=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=u(e,o);else{var r=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function d(t,e,n){var i=n.css,o=n.media,r=n.sourceMap;if(o&&t.setAttribute("media",o),r&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var f=null,g=0;function y(t,e){var n,i,o;if(e.singleton){var r=g++;n=f||(f=l(e)),i=p.bind(null,n,r,!1),o=p.bind(null,n,r,!0)}else n=l(e),i=d.bind(null,n,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).attributes="object"==typeof e.attributes?e.attributes:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=r());var n=s(t,e);return c(n,e),function(t){for(var i=[],r=0;r<n.length;r++){var a=n[r],l=o[a.id];l&&(l.refs--,i.push(l))}t&&c(s(t,e),e);for(var h=0;h<i.length;h++){var u=i[h];if(0===u.refs){for(var p=0;p<u.parts.length;p++)u.parts[p]();delete o[u.id]}}}}}]);
//# sourceMappingURL=leaflet-control-traceroute.js.map